{"version":3,"file":"static/js/431.c3fbf48b.chunk.js","mappings":"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","sources":["component/ProfilePage/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Profile.scss\";\r\nimport { MdEdit } from \"react-icons/md\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getUserList } from \"../../Redux/UserList/UserList\";\r\nimport { getListofRoles } from \"../../Redux/Roleandpermissionreducer/RoleAndPermissionReducer\";\r\nimport axiosWithAuth from \"../../utils/axiosClienttok\";\r\nimport { getProfile } from \"../../Redux/ProfileReducer/ProfileReducer\";\r\n\r\nfunction Profile() {\r\n  const currUser = localStorage.getItem(\"username\");\r\n\r\n  const profile = useSelector((state) => state.ProfileReducer.profile);\r\n  console.log(profile);\r\n\r\n  const dispatch = useDispatch();\r\n  const userList = useSelector((state) => state.UserList.list);\r\n  const roles = useSelector((state) => state.RoleAndPermissionReducer.roles);\r\n  const navigate = useNavigate();\r\n  const filterUserList = userList?.filter((user) => user.username !== currUser);\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserList());\r\n    dispatch(getListofRoles());\r\n    // dispatch(getListOfPermissions());\r\n    dispatch(getProfile(currUser));\r\n  }, []);\r\n\r\n  const [open, setOpen] = useState(null);\r\n  const [selectedRole, setSelectedRole] = useState([]); // State to hold selected role\r\n\r\n  const handleSelect = (e) => {\r\n    setSelectedRole([e.target.value]);\r\n  };\r\n  async function handleUpdateRole(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const response = await axiosWithAuth.patch(`/user-update/${open?.item?.username}/`, { groups: selectedRole });\r\n      console.log(response);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      dispatch(getUserList());\r\n      dispatch(getProfile(currUser));\r\n      setSelectedRole([]);\r\n      setOpen(\"\");\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"inner_profile\">\r\n        <div className=\"profile_info\">\r\n          <div className=\"name\">\r\n            <h4>Name :</h4>\r\n            <h4 className=\"value\"> {profile?.data?.fullname}</h4>\r\n          </div>\r\n          <div className=\"role\">\r\n            <h4>Role :</h4>\r\n            <h4 className=\"value\">{profile?.data?.groups}</h4>\r\n          </div>\r\n          {/* <div className=\"job_profile\">\r\n            <h4>Profile :</h4>\r\n            <h4>Senior tester</h4>\r\n          </div> */}\r\n          {profile?.data?.groups === \"Admin\" && (\r\n            <div className=\"role_button\">\r\n              <button className=\"role_management_button\" onClick={() => navigate(\"/role-management\")}>\r\n                Role management\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {profile?.data?.groups === \"Admin\" && (\r\n          <div className=\"user_heading\">\r\n            <h4>Users and Roles</h4>\r\n          </div>\r\n        )}\r\n        {profile?.data?.groups === \"Admin\" && (\r\n          <div className=\"list_of_user_and_role\">\r\n            <table border={1}>\r\n              <tbody>\r\n                <tr className=\"column_name\">\r\n                  <th>Id</th>\r\n                  <th>Name</th>\r\n                  <th>Role</th>\r\n                </tr>\r\n\r\n                {filterUserList?.map((item, index) => (\r\n                  <tr className=\"column_value\" key={index}>\r\n                    <th>{index + 1}</th>\r\n                    <th>{item?.fullname}</th>\r\n                    <th>\r\n                      {item?.groups} <MdEdit onClick={() => setOpen({ item, index })} className=\"edit\" />\r\n                    </th>\r\n                    {open?.index === index && (\r\n                      <th>\r\n                        <div className=\"dropdown\">\r\n                          <select value={selectedRole} onChange={handleSelect}>\r\n                            {roles?.map((item) => (\r\n                              <option key={item?.id} value={item?.id}>\r\n                                {item?.name}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n\r\n                          <button onClick={handleUpdateRole}>Update</button>\r\n                        </div>\r\n                      </th>\r\n                    )}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"names":["_profile$data","_profile$data2","_profile$data3","_profile$data4","_profile$data5","currUser","localStorage","getItem","profile","useSelector","state","ProfileReducer","console","log","dispatch","useDispatch","userList","UserList","list","roles","RoleAndPermissionReducer","navigate","useNavigate","filterUserList","filter","user","username","useEffect","getUserList","getListofRoles","getProfile","open","setOpen","useState","selectedRole","setSelectedRole","handleSelect","e","target","value","async","handleUpdateRole","preventDefault","_open$item","response","axiosWithAuth","patch","item","groups","error","_jsx","className","children","_jsxs","data","fullname","onClick","border","map","index","MdEdit","onChange","id","name"],"sourceRoot":""}