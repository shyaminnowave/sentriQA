"use strict";(self.webpackChunkqa_portal=self.webpackChunkqa_portal||[]).push([[686],{4686:(e,s,l)=>{l.r(s),l.d(s,{default:()=>m});var n=l(5043),i=l(49),o=l(3003),d=l(9120),a=l(423),c=l(3156),r=l(579);const t=function(){const e=(0,o.d4)((e=>e.RoleAndPermissionReducer.roles)),s=(0,o.d4)((e=>e.RoleAndPermissionReducer.permissions)),[l,d]=(0,n.useState)([]),[t,u]=(0,n.useState)(s),[m,h]=(0,n.useState)("");return(0,n.useEffect)((()=>{!async function(){try{var e,l,n,o;const a=await i.A.get(`/group-detail/${m}/`);console.log(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.permissions);const c=null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.permissions;if(console.log(c),c.length>0){const e=s.filter((e=>!c.some((s=>s.id===e.id))));u(e),d(c)}}catch(a){console.log(a)}}()}),[m]),(0,r.jsxs)("div",{className:"create_sections",children:[(0,r.jsx)("div",{className:"add_role",children:(0,r.jsxs)("select",{value:m,onChange:e=>{h([e.target.value])},children:[(0,r.jsx)("option",{value:"",children:"Select Role"}),null===e||void 0===e?void 0:e.map((e=>(0,r.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)))]})}),(0,r.jsxs)("div",{className:"add_permissions",children:[(0,r.jsx)("div",{className:"list_of_permissions",children:(0,r.jsx)("table",{border:1,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"column_name",children:(0,r.jsx)("th",{children:"All Permissions"})}),null===t||void 0===t?void 0:t.map(((e,s)=>(0,r.jsx)("tr",{className:"column_value",children:(0,r.jsxs)("th",{children:[e.name," ",(0,r.jsx)("button",{onClick:()=>(e=>{d([...l,e]),u(t.filter((s=>s!==e)))})(e),children:(0,r.jsx)(a.j8n,{})})]})},s)))]})})}),(0,r.jsx)("div",{className:"added_list_of_permissions",children:(0,r.jsx)("table",{border:1,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"column_name",children:(0,r.jsx)("th",{children:" Role Permissions"})}),null===l||void 0===l?void 0:l.map(((e,s)=>(0,r.jsx)("tr",{className:"column_value",children:(0,r.jsxs)("th",{children:[null===e||void 0===e?void 0:e.name," ",(0,r.jsx)("button",{onClick:()=>(e=>{d(l.filter((s=>s!==e))),u([...t,e])})(e),children:(0,r.jsx)(c._un,{})})]})},s)))]})})})]}),(0,r.jsx)("div",{className:"button_",children:(0,r.jsx)("button",{onClick:async function(e){e.preventDefault();const s=l.map((e=>e.id));console.log(m);try{var n;const e=await i.A.patch(`/group-detail/${m}/`,{permissions:s});console.log(e),!0===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status)&&console.log(!0)}catch(o){console.log(o)}},children:"Update role"})})]})};var u=l(3401);const m=function(){const e=(0,o.d4)((e=>e.RoleAndPermissionReducer.roles)),s=(0,o.d4)((e=>e.RoleAndPermissionReducer.permissions)),l=(0,o.wA)(),[a,c]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[v,j]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[_,N]=(0,n.useState)([]);(0,n.useEffect)((()=>{l((0,d.HS)()),l((0,d.u7)())}),[]);const b=e=>{console.log(x),p(e.target.value)};return(0,r.jsx)("div",{className:"role_mangement",children:(0,r.jsxs)("div",{className:"inner_role_mangement",children:[(0,r.jsx)("div",{className:"roles",children:(0,r.jsx)("table",{border:1,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"column_name",children:(0,r.jsx)("th",{children:"Role"})}),e&&(null===e||void 0===e?void 0:e.map(((e,s)=>(0,r.jsx)("tr",{className:"column_value",children:(0,r.jsx)("th",{children:null===e||void 0===e?void 0:e.name})},s))))]})})}),(0,r.jsxs)("div",{className:"create_edit",children:[(0,r.jsxs)("div",{className:"button",children:[(0,r.jsx)("button",{className:a?"colour":"normal",onClick:()=>{c(!0),h(!1)},children:"Create Role"}),(0,r.jsx)("button",{className:m?"colour":"normal",onClick:()=>{h(!0),c(!1)},children:"Edit Role"})]}),a&&(0,r.jsxs)("div",{className:"create_section",children:[(0,r.jsx)("div",{className:"add_role",children:(0,r.jsx)("input",{type:"text",placeholder:"Create Role",onChange:e=>j(e.target.value)})}),(0,r.jsxs)("div",{className:"add_permissions",children:[(0,r.jsx)("div",{className:"list_of_permissions",children:(0,r.jsx)("table",{border:1,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"column_name",children:(0,r.jsx)("th",{children:"Permissions"})}),s&&(null===s||void 0===s?void 0:s.map(((e,s)=>(0,r.jsx)("tr",{className:"column_value "+(_.includes(e)?"selected":""),onClick:()=>{return s=e,void(_.includes(s)?N(_.filter((e=>e!==s))):N([..._,s]));var s},children:(0,r.jsx)("th",{children:null===e||void 0===e?void 0:e.name})},s))))]})})}),(0,r.jsx)("div",{className:"added_list_of_permissions",children:(0,r.jsx)("table",{border:1,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"column_name",children:(0,r.jsx)("th",{children:" Added Permissions"})}),_&&_.map(((e,s)=>(0,r.jsx)("tr",{className:"column_value",children:(0,r.jsx)("th",{onClick:b,children:null===e||void 0===e?void 0:e.name})},s)))]})})})]}),(0,r.jsx)("div",{className:"button_",children:(0,r.jsx)("button",{onClick:async function(e){e.preventDefault();const s=null===_||void 0===_?void 0:_.map((e=>e.id));try{var n;const e=await i.A.post("/create-group/",{name:v,permissions:s});console.log(e),!0===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.success)&&u.oR.success("Role created")}catch(o){console.log(o),u.oR.error("Error")}finally{c(!1),N([]),l((0,d.HS)())}},children:"Add role"})})]}),m&&(0,r.jsx)(t,{})]})]})})}}}]);
//# sourceMappingURL=686.bb47c60c.chunk.js.d3408b2491a4.map